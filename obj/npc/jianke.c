// jia-shen.c 假身
void create()
{;   set_name("假身",({"jiashen"}));;   set("gender","男性");;   set("age",30);;   set("str",30);;   set("per",20);;   set("combat_exp",1000);;        set("attitude", "friendly");;   set_skill("dodge",10);;   set_skill("moshenbu",10);;   map_skill("dodge","moshenbu");;;   setup();;   carry_object("/d/obj/weapon/stick/bintiegun")->wield();;   carry_object("/d/obj/armor/shoupi")->wear();;};void copy_status(object me,object ob)
ry("equipped") ) {;                        carry_object(base_name(invi))->wear();;                        me->set("armor", base_name(invi));;                };        };*/;   me->set("str",ob->query("str"));;   me->set("int",ob->query("int"));;   me->set("con",ob->query("con"));;   me->set("per",ob->query("per"));;   me->set("cor",ob->query("cor"));;   me->set("spi",ob->query("spi"));;   me->set("cps",ob->query("cps"));;   me->set("kar",ob->query("kar"));;;   me->set("max_kee",ob->query("max_kee"));;   me->set("eff_kee",ob->query("eff_kee"));;   me->set("kee",ob->query("kee"));;;   me->set("max_gin",ob->query("max_gin"));;   me->set("eff_gin",ob->query("eff_gin"));;   me->set("gin",ob->query("gin"));;;   me->set("max_sen",ob->query("max_sen"));;   me->set("eff_sen",ob->query("eff_sen"));;   me->set("sen",ob->query("sen"));;;   me->set("max_force",ob->query("max_force"));;   me->set("force",ob->query("force"));;   me->set("force_factor",ob->query("force_factor"));;;   me->set("max_mana",ob->query("max_mana"));;   me->set("mana",ob->query("mana"));;   me->set("mana_factor",ob->query("mana_factor"));;;   me->set("combat_exp",ob->query("combat_exp"));;};void die()
{;        message("vision",;                HIB + name() + "身子一晃，变成一股青烟散去了。\n" NOR,environment(),;                this_object() );;        destruct(this_object());;};int heal_up()
{;   object me=this_object();;   object who=present(me->query("leader"),environment(me) );;        if( environment() && (!is_fighting() || !objectp(who) || !who->is_fighting() )  ) {;                call_out("die", 1);;                return 1;;        };   if( (int)me->query("time") > 10 ) {;     call_out("die",1);;     return 1;;   };   add("time", 1);;        return ::heal_up() + 1;;};void invocation(object who)
{;   int i;;   object me,*enemy;;;   me=this_object();;   message("vision",;     HIB "只见"+who->query("name")+"将身一晃，顿时眼前又出现一个"+who->query("name")+"！\n" NOR,;     environment(),this_object());;   copy_status(me,who);;   enemy=who->query_enemy();;   i=sizeof(enemy);;   while(i--) {;                if( enemyi && living(enemyi) ) {;                        kill_ob(enemyi);;                        if( userp(enemyi) ) enemyi->fight_ob(this_object());;                        else enemyi->kill_ob(this_object());;                };        };   set("leader", (string)who->query("id"));;        set_leader(who);;}
